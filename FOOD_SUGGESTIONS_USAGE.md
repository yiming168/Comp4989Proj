# Food Suggestions API Integration

This module integrates your nutrition classification model with Google AI Studio (Gemini API) to generate personalized food suggestions based on detected nutritional deficiencies.

## Setup

1. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Get Google AI Studio API Key:**
   - Visit https://ai.google.dev/aistudio/
   - Sign in and create an API key
   - Set it as an environment variable:
     ```bash
     # Windows (PowerShell)
     $env:GEMINI_API_KEY="your-api-key-here"
     
     # Windows (CMD)
     set GEMINI_API_KEY=your-api-key-here
     
     # Linux/Mac
     export GEMINI_API_KEY="your-api-key-here"
     ```

## Usage

### Option 1: Use with inference.py

Run inference with food suggestions:

```bash
# Single image with suggestions
python inference.py --image path/to/image.jpg --suggestions

# Multiple images with suggestions
python inference.py --dir path/to/folder --suggestions

# JSON-only output
python inference.py --image path/to/image.jpg --suggestions --json-only

# With explicit API key
python inference.py --image path/to/image.jpg --suggestions --api-key "your-key-here"
```

### Option 2: Use food_suggestions.py directly

```bash
python food_suggestions.py Class_01_Vitamin_A_Bitots_Spot 0.85
```

### Option 3: Import in your own code

```python
from food_suggestions import get_food_suggestions, format_suggestions_output
from inference import predict, load_model, load_classes

# Run prediction
class_names = load_classes()
model = load_model(class_names)
result = predict(model, class_names, "path/to/image.jpg")

# Get food suggestions
suggestions_result = get_food_suggestions(
    result["pred_class"],
    result["confidence"]
)

# Display formatted output
print(format_suggestions_output(suggestions_result))
```

## Class Mappings

The system maps model predictions to deficiency types:

- `Class_01_Vitamin_A_Bitots_Spot` → Vitamin A deficiency
- `Class_02_Iron_Koilonychia` → Iron deficiency
- `Class_03_B_Vitamin_Glossitis` → B Vitamins deficiency
- `Class_04_Healthy_Control` → No deficiency (general nutrition tips)

## Output Format

The AI API provides:
- Specific food recommendations (5-7 items)
- Brief explanations of why each food is beneficial
- General dietary tips
- Medical disclaimer

## Important Notes

- **This is not a medical diagnostic tool** - all outputs include disclaimers
- API calls require internet connection
- API usage may incur costs depending on your Google AI Studio plan
- The suggestions are generated by AI and should be verified with healthcare professionals

